# Setting up a Log4Shell-exploitable version with Docker

**Prerequisites:**

* Docker

**Note:** The Docker image takes care of the whole setup described [here](log4shell_exploitation_setup_manual.md) in just two simple commands.

Build exploitable Docker image:

```console
docker build -t insecure-bank-log4shell -f Dockerfile.log4shell .
```

Create and run Docker container:

```console
docker run -p 8080:8080 -p 1337:1337 -d --name insecure-bank insecure-bank-log4shell
```

You can then access the bank application at <http://localhost:8080/insecure-bank/>.

## Making it available to other Docker containers

If you want to make it available to other Docker containers, e.g. for the Docker load generator (see [here](load_generation_docker.md)) a separate Docker network has to be created, as follows:

```console
docker network create insecure-bank-net
```

And the Docker container has to be created and run as follows:

```console
docker run -p 8080:8080 -p 1337:1337 -d --name insecure-bank --network insecure-bank-net insecure-bank-log4shell
```

## Gathering information about what's happening inside

Investigating the output and logs of the application and the LDAP/HTTP servers can then be achieved by issuing these commands (in separate terminals):

```console
docker logs -f insecure-bank
docker exec insecure-bank tail -f /root/target/cargo/configurations/tomcat9x/logs/insecure-bank.log
docker exec insecure-bank tail -f /root/ldap_server1.log
docker exec insecure-bank tail -f /root/ldap_server2.log
docker exec insecure-bank tail -f /root/http_server.log
```
